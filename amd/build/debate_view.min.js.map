{"version":3,"sources":["../src/debate_view.js"],"names":["define","$","AJAX","str","mdlcfg","notification","templates","debateView","init","userFullName","userImageURL","userID","courseID","debateID","cmID","responseType","responseId","document","on","length","debateResponse","remove","userResponse","val","responseCall","call","methodname","args","courseid","debateid","cmid","response","responsetype","done","result","render","user_profile_image","user_full_name","then","html","outputResponse","after","fail","exception","responseClass","response_class","userid"],"mappings":"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","sourcesContent":["/**\n * js for debate page.\n *\n * @package     mod_debate\n * @copyright   2020 Safat Shahin <safatshahin@gmail.com>\n * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/ajax', 'core/str', 'core/config', 'core/notification', 'core/templates'],\n    function($, AJAX, str, mdlcfg, notification, templates) {\n        var debateView = {\n            init: function(userFullName, userImageURL, userID, courseID, debateID, cmID) {\n                var responseType = 0;\n                var responseId = '';\n                $(document).on('click', '.mod-debate-positive-icon', function() {\n                    if ($(\"#mod-debate-response-input\").length === 0) {\n                        responseType = 1;\n                        responseId = '#mod-debate-pos-side';\n                        debateView.debateResponse(userFullName, userImageURL,\n                            'mod-debate-positive-response',\n                            responseId, userID, courseID, debateID, cmID, responseType);\n                    }\n                });\n                $(document).on('click', '.mod-debate-negative-icon', function() {\n                    if ($(\"#mod-debate-response-input\").length === 0) {\n                        responseType = 0;\n                        responseId = '#mod-debate-neg-side';\n                        debateView.debateResponse(userFullName, userImageURL,\n                            'mod-debate-negative-response',\n                            responseId, userID, courseID, debateID, cmID, responseType);\n                    }\n                });\n                $(document).on('click', '#mod-debate-cancel-respose', function() {\n                    $('#' + userID + '-mod-debate').remove();\n                });\n                $(document).on('click', '#mod-debate-update-response', function() {\n                    var userResponse = $(\"#mod-debate-response-input\").val();\n                    var responseCall = AJAX.call([{\n                        methodname: 'mod_debate_add_debate_respose',\n                        args: {\n                            courseid: courseID,\n                            debateid: debateID,\n                            cmid: cmID,\n                            response: userResponse,\n                            responsetype: responseType\n                        }\n                    }]);\n                    responseCall[0].done(function(result) {\n                        if (result) {\n                            $('#' + userID + '-mod-debate').remove();\n                            var outputContext = {\n                                user_profile_image: userImageURL,\n                                user_full_name: userFullName,\n                                response: userResponse\n                            };\n                            templates.render('mod_debate/debate_response_output', outputContext).then(function (html, js) {\n                                var outputResponse = $(responseId);\n                                outputResponse.after(html);\n                            }).fail(notification.exception);\n                        } else {\n                            //error checking\n                        }\n                    }).fail(notification.exception);\n                });\n            },\n            debateResponse: function(userFullName, userImageURL, responseClass,\n                                     responseId, userID) {\n                var context = {\n                    response_class: responseClass,\n                    user_profile_image: userImageURL,\n                    user_full_name: userFullName,\n                    userid: userID + '-mod-debate'\n                };\n                templates.render('mod_debate/debate_response', context).then(function (html, js) {\n                    var debateResponse = $(responseId);\n                    debateResponse.after(html);\n                }).fail(notification.exception);\n            }\n        };\n        return debateView;\n    });\n"],"file":"debate_view.min.js"}