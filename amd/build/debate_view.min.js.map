{"version":3,"sources":["../src/debate_view.js"],"names":["define","$","AJAX","str","mdlcfg","notification","templates","debateView","init","userFullName","userImageURL","userID","courseID","debateID","responseAllowed","positiveResponse","negativeResponse","userCapability","userEditCapability","userDeleteCapability","responseType","responseId","responseTextID","id","elementid","elementidContainer","editID","deleteID","delay","timer","callback","ms","clearTimeout","setTimeout","animateToDiv","animate","scrollTop","offset","top","keyup","remove","userResponsetext","val","length","responseAjax","call","methodname","args","courseid","debateid","response","responsetype","done","found","result","getResponses","JSON","parse","data","is","render","found_response","then","html","debateResponse","after","fail","exception","document","on","attr","deleteResponse","text","trim","css","renderNotification","allocationAjax","debatetype","parseInt","attribute","positive_response","negative_response","userid","output","addNotification","message","type","userResponse","responseCall","isNumeric","outputContext","user_profile_image","user_full_name","elementidcontainer","user_capability","user_edit_capability","user_delete_capability","editid","deleteid","outputResponse","get_strings","component","s","confirm","deleted","notificationValue","notificationType","results"],"mappings":"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","sourcesContent":["/**\n * Js for debate page.\n *\n * @package     mod_debate\n * @copyright   2021 Safat Shahin <safatshahin@gmail.com>\n * @license     https://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery', 'core/ajax', 'core/str', 'core/config', 'core/notification', 'core/templates'],\n    function ($, AJAX, str,\n              mdlcfg, notification, templates) {\n        var debateView = {\n            init: function (userFullName, userImageURL, userID, courseID, debateID,\n                            responseAllowed, positiveResponse, negativeResponse, userCapability,\n                            userEditCapability, userDeleteCapability) {\n                // VARIABLES TO MAINTAIN THE FRONTEND FEATURES\n                var responseType = 0;\n                var responseId = '';\n                var responseTextID = '';\n                var id = null;\n                var elementid = '';\n                var elementidContainer = '';\n                var editID = '';\n                var deleteID = '';\n                // DELAY TIMER FOR THE USER TO FINISH TYPING TO FIND POSSIBLE MATCH\n                var delay = (function () {\n                    var timer = 0;\n                    return function (callback, ms) {\n                        clearTimeout(timer);\n                        timer = setTimeout(callback, ms);\n                    };\n                })();\n                // ANIMATE TO THE TOP OF THE PAGE FOR EDITING RESPONSE\n                $.animateToDiv = function () {\n                    $('html, body').animate({\n                        scrollTop: $(\".mod-debate-topic-container\").offset().top\n                    }, 2000);\n                };\n                // POSSIBLE MATCH WITH CURRENTLY TYPED RESPONSE\n                $(\".mod-debate-response-input\").keyup(function () {\n                    delay(function () {\n                        $(\"div\").remove(\".mod-debate-find-response\");\n                        var userResponsetext = $(responseTextID).val();\n                        if (userResponsetext.length > 0) {\n                            var responseAjax = AJAX.call([{\n                                methodname: 'mod_debate_find_debate_respose',\n                                args: {\n                                    courseid: courseID,\n                                    debateid: debateID,\n                                    response: userResponsetext,\n                                    responsetype: responseType\n                                }\n                            }]);\n                            responseAjax[0].done(function (found) {\n                                if (found.result) {\n                                    var getResponses = JSON.parse(found.data);\n                                    var context = {\n                                        found_response: getResponses\n                                    };\n                                    if ($('#mod-debate-insert-postive-response').is(\":visible\")\n                                        || $('#mod-debate-insert-negative-response').is(\":visible\")) {\n                                        templates.render('mod_debate/debate_find_response', context).then(function (html, js) {\n                                            var debateResponse = $(responseId);\n                                            debateResponse.after(html);\n                                        }).fail(notification.exception);\n                                    }\n                                }\n                            }).fail(notification.exception);\n                        }\n                    }, 700);\n                });\n                // DELETE RESPONSE\n                $(document).on('click', '.mod-debate-negative-delete', function () {\n                    id = $(this).attr(\"data-id\");\n                    if (negativeResponse > 0) {\n                        negativeResponse = negativeResponse - 1;\n                    }\n                    debateView.deleteResponse(courseID, debateID, id);\n                });\n                $(document).on('click', '.mod-debate-positive-delete', function () {\n                    id = $(this).attr(\"data-id\");\n                    if (positiveResponse > 0) {\n                        positiveResponse = positiveResponse - 1;\n                    }\n                    debateView.deleteResponse(courseID, debateID, id);\n                });\n                // EDIT RESPONSE\n                $(document).on('click', '.mod-debate-negative-edit', function () {\n                    id = $(this).attr(\"data-id\");\n                    elementid = '#element' + id;\n                    elementidContainer = '#element' + id + 'container';\n                    if ($('#mod-debate-insert-postive-response').is(\":hidden\")\n                        && $('#mod-debate-insert-negative-response').is(\":hidden\")) {\n                        var text = $(elementid).text().trim();\n                        responseType = 0;\n                        responseId = '#mod-debate-insert-negative-response';\n                        responseTextID = '#mod-debate-negative-response-input';\n                        editID = 'mod-debate-negative-edit';\n                        deleteID = 'mod-debate-negative-delete';\n                        $(responseTextID).val(text);\n                        $(responseTextID).html(text);\n                        $(elementidContainer).css('display', 'none');\n                        $(responseId).css('display', 'block');\n                        $.animateToDiv();\n                    } else {\n                        debateView.renderNotification(0, 'info');\n                    }\n                });\n                $(document).on('click', '.mod-debate-positive-edit', function () {\n                    id = $(this).attr(\"data-id\");\n                    elementid = '#element' + id;\n                    elementidContainer = '#element' + id + 'container';\n                    if ($('#mod-debate-insert-negative-response').is(\":hidden\")\n                        && $('#mod-debate-insert-postive-response').is(\":hidden\")) {\n                        var text = $(elementid).text().trim();\n                        responseType = 1;\n                        responseId = '#mod-debate-insert-postive-response';\n                        responseTextID = '#mod-debate-positive-response-input';\n                        editID = 'mod-debate-positive-edit';\n                        deleteID = 'mod-debate-positive-delete';\n                        $(responseTextID).val(text);\n                        $(responseTextID).html(text);\n                        $(elementidContainer).css('display', 'none');\n                        $(responseId).css('display', 'block');\n                        $.animateToDiv();\n                    } else {\n                        debateView.renderNotification(0, 'info');\n                    }\n                });\n                // ADD RESPONSE\n                $(document).on('click', '.mod-debate-positive-icon', function () {\n                    if ($('#mod-debate-insert-negative-response').is(\":hidden\")\n                        && $('#mod-debate-insert-postive-response').is(\":hidden\")) {\n                        var allocationAjax = AJAX.call([{\n                            methodname: 'mod_debate_check_response_allocation',\n                            args: {\n                                courseid: courseID,\n                                debateid: debateID,\n                                debatetype: parseInt(responseAllowed),\n                                attribute: 'positive',\n                                positive_response: positiveResponse,\n                                negative_response: negativeResponse,\n                                userid: userID\n                            }\n                        }]);\n                        allocationAjax[0].done(function (output) {\n                            var result = output.result;\n                            if (result) {\n                                responseType = 1;\n                                responseId = '#mod-debate-insert-postive-response';\n                                responseTextID = '#mod-debate-positive-response-input';\n                                editID = 'mod-debate-positive-edit';\n                                deleteID = 'mod-debate-positive-delete';\n                                $(responseTextID).val('');\n                                $(responseId).css('display', 'block');\n                                id = null;\n                            } else {\n                                notification.addNotification({\n                                    message: output.message,\n                                    type: 'info'\n                                });\n                            }\n                        }).fail(notification.exception);\n                    } else {\n                        debateView.renderNotification(0, 'info');\n                    }\n                });\n                $(document).on('click', '.mod-debate-negative-icon', function () {\n                    if ($('#mod-debate-insert-postive-response').is(\":hidden\")\n                        && $('#mod-debate-insert-negative-response').is(\":hidden\")) {\n                        var allocationAjax = AJAX.call([{\n                            methodname: 'mod_debate_check_response_allocation',\n                            args: {\n                                courseid: courseID,\n                                debateid: debateID,\n                                debatetype: parseInt(responseAllowed),\n                                attribute: 'negative',\n                                positive_response: positiveResponse,\n                                negative_response: negativeResponse,\n                                userid: userID\n                            }\n                        }]);\n                        allocationAjax[0].done(function (output) {\n                            var result = output.result;\n                            if (result) {\n                                responseType = 0;\n                                responseId = '#mod-debate-insert-negative-response';\n                                responseTextID = '#mod-debate-negative-response-input';\n                                editID = 'mod-debate-negative-edit';\n                                deleteID = 'mod-debate-negative-delete';\n                                $(responseTextID).val('');\n                                $(responseId).css('display', 'block');\n                                id = null;\n                            } else {\n                                notification.addNotification({\n                                    message: output.message,\n                                    type: 'info'\n                                });\n                            }\n                        }).fail(notification.exception);\n                    } else {\n                        debateView.renderNotification(0, 'info');\n                    }\n                });\n                // CANCEL ADD RESPONSE\n                $(document).on('click', '#mod-debate-cancel-respose', function () {\n                    $(responseId).css('display', 'none');\n                    $(elementidContainer).css('display', 'block');\n                    $(\"div\").remove(\".mod-debate-find-response\");\n                });\n                // UPDATE OR SAVE NEW OR EDITED RESPONSE\n                $(document).on('click', '#mod-debate-update-response', function () {\n                    $(\"div\").remove(\".mod-debate-find-response\");\n                    var userResponse = $(responseTextID).val();\n                    if (userResponse.length > 0) {\n                        var responseCall = AJAX.call([{\n                            methodname: 'mod_debate_add_debate_respose',\n                            args: {\n                                courseid: courseID,\n                                debateid: debateID,\n                                response: userResponse,\n                                responsetype: responseType,\n                                id: id\n                            }\n                        }]);\n                        responseCall[0].done(function (output) {\n                            if (output.result) {\n                                if (responseType === 0) {\n                                    negativeResponse++;\n                                } else {\n                                    positiveResponse++;\n                                }\n                                $(responseId).css('display', 'none');\n                                $(\"div\").remove(\".mod-debate-find-response\");\n                                $(elementidContainer).remove();\n                                if (id === null && $.isNumeric(output.id)) {\n                                    id = output.id;\n                                }\n                                var outputContext = {\n                                    user_profile_image: userImageURL,\n                                    user_full_name: userFullName,\n                                    response: userResponse,\n                                    elementidcontainer: 'element' + id + 'container',\n                                    elementid: 'element' + id,\n                                    user_capability: userCapability,\n                                    user_edit_capability: userEditCapability,\n                                    user_delete_capability: userDeleteCapability,\n                                    id: id,\n                                    editid: editID,\n                                    deleteid: deleteID\n                                };\n                                templates.render('mod_debate/debate_response_output', outputContext).then(function (html, js) {\n                                    var outputResponse = $(responseId);\n                                    outputResponse.after(html);\n                                    id = null;\n                                    $(\"div\").remove(\".mod-debate-find-response\");\n                                    elementidContainer = '';\n                                    elementid = '';\n                                }).fail(notification.exception);\n                            } else {\n                                debateView.renderNotification(2, 'error');\n                            }\n                            $(\"div\").remove(\".mod-debate-find-response\");\n                        }).fail(notification.exception);\n                    } else {\n                        debateView.renderNotification(1, 'info');\n                    }\n                });\n            },\n            deleteResponse: function (courseID, debateID, id) {\n                str.get_strings([\n                    {'key': 'confirm_delete', component: 'mod_debate'}\n                ]).done(function (s) {\n                    if (confirm(s[0])) {\n                        var elementidContainer = '#element' + id + 'container';\n                        var responseAjax = AJAX.call([{\n                            methodname: 'mod_debate_delete_debate_respose',\n                            args: {\n                                courseid: courseID,\n                                debateid: debateID,\n                                id: id\n                            }\n                        }]);\n                        responseAjax[0].done(function (deleted) {\n                            if (deleted.result) {\n                                $(elementidContainer).remove();\n                            } else {\n                                debateView.renderNotification(3, 'info');\n                            }\n                        }).fail(notification.exception);\n                    }\n                });\n            },\n            renderNotification: function (notificationValue, notificationType) {\n                var strings = [\n                    {'key': 'edit_mode_active', component: 'mod_debate'},\n                    {'key': 'empty_response', component: 'mod_debate'},\n                    {'key': 'error_add', component: 'mod_debate'},\n                    {'key': 'error_delete', component: 'mod_debate'}\n                ];\n                str.get_strings(strings).then(function (results) {\n                    notification.addNotification({\n                        message: results[notificationValue],\n                        type: notificationType\n                    });\n                });\n            }\n        };\n        return debateView;\n    });\n"],"file":"debate_view.min.js"}