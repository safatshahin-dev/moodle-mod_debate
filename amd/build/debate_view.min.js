define ("mod_debate/debate_view",["jquery","core/ajax","core/str","core/config","core/notification","core/templates"],function(a,b,c,d,e,f){return{init:function init(c,d,g,h,i,j,k,l){var m=0,n="",o="",p=null,q="",r="",s="",t="",u=function(){var a=0;return function(b,c){clearTimeout(a);a=setTimeout(b,c)}}();a.getAllocation=function(a){var b=!0;switch(j){case"0":break;case"1":if(0<k||0<l){b=!1}break;case"2":if(0<k&&0<l){b=!1}else if("positive"===a&&0<k){b=!1}else if("negative"===a&&0<l){b=!1}break;}return b};a(".mod-debate-response-input").keyup(function(){u(function(){a("div").remove(".mod-debate-find-response");var c=a(o).val();if(0<c.length){var d=b.call([{methodname:"mod_debate_find_debate_respose",args:{courseid:h,debateid:i,response:c,responsetype:m}}]);d[0].done(function(b){if(b.result){var c=JSON.parse(b.data);f.render("mod_debate/debate_find_response",{found_response:c}).then(function(b){var c=a(n);c.after(b)}).fail(e.exception)}}).fail(e.exception)}},700)});a(document).on("click","#mod-debate-negative-edit",function(){p=a(this).attr("data-id");q="#element"+p;r="#element"+p+"container";var b=a.getAllocation("negative");if(b&&a("#mod-debate-insert-postive-response").is(":hidden")&&a("#mod-debate-insert-negative-response").is(":hidden")){var c=a(q).text().trim();m=0;n="#mod-debate-insert-negative-response";o="#mod-debate-negative-response-input";s="mod-debate-negative-edit";t="mod-debate-negative-delete";a(o).html(c);a(r).css("display","none");a(n).css("display","block");a("html, body").animate({scrollTop:a("#mod-debate-neg-side").offset().top},2e3)}});a(document).on("click","#mod-debate-positive-edit",function(){p=a(this).attr("data-id");q="#element"+p;r="#element"+p+"container";var b=a.getAllocation("positive");if(b&&a("#mod-debate-insert-negative-response").is(":hidden")&&a("#mod-debate-insert-postive-response").is(":hidden")){var c=a(q).text().trim();m=1;n="#mod-debate-insert-postive-response";o="#mod-debate-positive-response-input";s="mod-debate-positive-edit";t="mod-debate-positive-delete";a(o).html(c);a(r).css("display","none");a(n).css("display","block");a("html, body").animate({scrollTop:a("#mod-debate-pos-side").offset().top},2e3)}});a(document).on("click",".mod-debate-positive-icon",function(){var b=a.getAllocation("positive");if(b&&a("#mod-debate-insert-negative-response").is(":hidden")){m=1;n="#mod-debate-insert-postive-response";o="#mod-debate-positive-response-input";a(o).val("");a(n).css("display","block")}});a(document).on("click",".mod-debate-negative-icon",function(){var b=a.getAllocation("negative");if(b&&a("#mod-debate-insert-postive-response").is(":hidden")){m=0;n="#mod-debate-insert-negative-response";o="#mod-debate-negative-response-input";a(o).val("");a(n).css("display","block")}});a(document).on("click","#mod-debate-cancel-respose",function(){a(n).css("display","none");a(r).css("display","block");a("div").remove(".mod-debate-find-response")});a(document).on("click","#mod-debate-update-response",function(){a("div").remove(".mod-debate-find-response");var g=a(o).val();if(0<g.length){var j=b.call([{methodname:"mod_debate_add_debate_respose",args:{courseid:h,debateid:i,response:g,responsetype:m,id:p}}]);j[0].done(function(b){if(b.result){if(0===m){l++}else{k++}a(n).css("display","none");a("div").remove(".mod-debate-find-response");a(r).remove();var h={user_profile_image:d,user_full_name:c,response:g,elementidcontainer:"element"+b.id+"container",elementid:"element"+b.id,user_capability:!0,id:p,editid:s,deleteid:t};f.render("mod_debate/debate_response_output",h).then(function(b){var c=a(n);c.after(b);p=null}).fail(e.exception)}}).fail(e.exception)}})}}});
//# sourceMappingURL=debate_view.min.js.map
