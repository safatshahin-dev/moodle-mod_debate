define ("mod_debate/debate_view",["jquery","core/ajax","core/str","core/config","core/notification","core/templates"],function(a,b,c,d,e,f){return{init:function init(c,d,g,h,i,j,k,l,m){var n=0,o="",p="",q=function(){var a=0;return function(b,c){clearTimeout(a);a=setTimeout(b,c)}}();a.getAllocation=function(a){var b=!0;switch(k){case"0":break;case"1":if(0<l||0<m){b=!1}break;case"2":if(0<l&&0<m){b=!1}else if("positive"===a&&0<l){b=!1}else if("negative"===a&&0<m){b=!1}break;}return b};a(".mod-debate-response-input").keyup(function(){q(function(){a("div").remove(".mod-debate-find-response");var c=a(p).val();if(0<c.length){var d=b.call([{methodname:"mod_debate_find_debate_respose",args:{courseid:h,debateid:i,cmid:j,response:c,responsetype:n}}]);d[0].done(function(b){if(b.result){var c=JSON.parse(b.data);f.render("mod_debate/debate_find_response",{found_response:c}).then(function(b){var c=a(o);c.after(b)}).fail(e.exception)}}).fail(e.exception)}},700)});a(document).on("click",".mod-debate-positive-icon",function(){var b=a.getAllocation("positive");if(b&&a("#mod-debate-insert-negative-response").is(":hidden")){n=1;o="#mod-debate-insert-postive-response";p="#mod-debate-positive-response-input";a(p).val("");a(o).css("display","block")}});a(document).on("click",".mod-debate-negative-icon",function(){var b=a.getAllocation("negative");if(b&&a("#mod-debate-insert-postive-response").is(":hidden")){n=0;o="#mod-debate-insert-negative-response";p="#mod-debate-negative-response-input";a(p).val("");a(o).css("display","block")}});a(document).on("click","#mod-debate-cancel-respose",function(){a(o).css("display","none");a("div").remove(".mod-debate-find-response")});a(document).on("click","#mod-debate-update-response",function(){a("div").remove(".mod-debate-find-response");var g=a(p).val();if(0<g.length){var k=b.call([{methodname:"mod_debate_add_debate_respose",args:{courseid:h,debateid:i,cmid:j,response:g,responsetype:n}}]);k[0].done(function(b){if(b){if(0===n){m++}else{l++}a(o).css("display","none");a("div").remove(".mod-debate-find-response");f.render("mod_debate/debate_response_output",{user_profile_image:d,user_full_name:c,response:g}).then(function(b){var c=a(o);c.after(b)}).fail(e.exception)}}).fail(e.exception)}})}}});
//# sourceMappingURL=debate_view.min.js.map
